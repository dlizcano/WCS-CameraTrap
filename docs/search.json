[
  {
    "objectID": "occupancy.html",
    "href": "occupancy.html",
    "title": "occupancy",
    "section": "",
    "text": "Obtener datos para estudios de poblaciones animales, es costoso y dispendioso, y no siempre se puede medir la densidad poblacional o parámetros demográficos como natalidad o mortalidad.\n\n\nEn este panorama surge la estimación de la ocupación (la cual vamos a llamar Psi (ψ)), como una buena herramienta para entender las poblaciones. Usualmente parámetros poblacionales como la abundancia y la densidad, requieren de un elevado número de registros, y tomar datos con un diseño especifico, con los costos económicos y logísticos que conlleva.\nAdicionalmente y debido a que la detectabilidad (la cual vamos a llamar (p)) en animales silvestres no es perfecta, el uso de los datos crudos genera subestimaciones de la ocupación. Sin embargo con el empleo de muestreos repetidos, es posible generar estimaciones del error de detección y, con esta estimación, obtener valores no sesgados de la ocupación. Los métodos de análisis de la ocupación fueron inicialmente desarrollados por (MacKenzie et al., 2002) y posteriormente expandidos por otros autores (M. Kéry & Royle, 2008; MacKenzie et al., 2006; MacKenzie & Royle, 2005; Royle, 2006; Royle & Kéry, 2007; Royle, Nichols, Kéry, 2005).\nPara aprender con mas detalle sobre la ocupación, te recomiendo seguir este tutorial en español.\nA continuacion vamos a hacer un analisis de ocupación sencillo usando los datos del Jaguar Camera Trap Survey, Tuichi 8, 2019 del archivo BOL-038.xlsx"
  },
  {
    "objectID": "occupancy.html#introducción",
    "href": "occupancy.html#introducción",
    "title": "occupancy",
    "section": "",
    "text": "Obtener datos para estudios de poblaciones animales, es costoso y dispendioso, y no siempre se puede medir la densidad poblacional o parámetros demográficos como natalidad o mortalidad.\n\n\nEn este panorama surge la estimación de la ocupación (la cual vamos a llamar Psi (ψ)), como una buena herramienta para entender las poblaciones. Usualmente parámetros poblacionales como la abundancia y la densidad, requieren de un elevado número de registros, y tomar datos con un diseño especifico, con los costos económicos y logísticos que conlleva.\nAdicionalmente y debido a que la detectabilidad (la cual vamos a llamar (p)) en animales silvestres no es perfecta, el uso de los datos crudos genera subestimaciones de la ocupación. Sin embargo con el empleo de muestreos repetidos, es posible generar estimaciones del error de detección y, con esta estimación, obtener valores no sesgados de la ocupación. Los métodos de análisis de la ocupación fueron inicialmente desarrollados por (MacKenzie et al., 2002) y posteriormente expandidos por otros autores (M. Kéry & Royle, 2008; MacKenzie et al., 2006; MacKenzie & Royle, 2005; Royle, 2006; Royle & Kéry, 2007; Royle, Nichols, Kéry, 2005).\nPara aprender con mas detalle sobre la ocupación, te recomiendo seguir este tutorial en español.\nA continuacion vamos a hacer un analisis de ocupación sencillo usando los datos del Jaguar Camera Trap Survey, Tuichi 8, 2019 del archivo BOL-038.xlsx"
  },
  {
    "objectID": "occupancy.html#primero-cargamos-algunos-paquetes-y-funciones",
    "href": "occupancy.html#primero-cargamos-algunos-paquetes-y-funciones",
    "title": "occupancy",
    "section": "Primero cargamos algunos paquetes y funciones",
    "text": "Primero cargamos algunos paquetes y funciones\n\n\nCode\nlibrary(readxl)\nlibrary(grateful)\nlibrary(DT)\nlibrary(sf)\nlibrary(mapview)\nlibrary(maps)\nlibrary(tmap)\nlibrary(terra)\nlibrary(elevatr)\nlibrary(unmarked)\nlibrary(ubms)\n\nlibrary(tidyverse)\n\nsource(\"C:/CodigoR/WCS-CameraTrap/R/organiza_datos.R\")"
  },
  {
    "objectID": "occupancy.html#ahora-cargamos-los-datos-del-archivo-bol-038.xlsx",
    "href": "occupancy.html#ahora-cargamos-los-datos-del-archivo-bol-038.xlsx",
    "title": "occupancy",
    "section": "Ahora cargamos los datos del archivo BOL-038.xlsx",
    "text": "Ahora cargamos los datos del archivo BOL-038.xlsx\nPara esto usamos las funciones loadproject y get.sites.\n\n\nCode\n# load data\nbol038 &lt;- loadproject(\"C:/CodigoR/WCS-CameraTrap/data/Bolivia/BOL-038.xlsx\")\n\n# get sites\nbol038_sites &lt;- get.sites(\"C:/CodigoR/WCS-CameraTrap/data/Bolivia/BOL-038.xlsx\")\n# make a map\nmapview(bol038_sites, zcol=\"bait\")\n\n\n\n\n\n\n\nveamos una tabla con numero de fotos por especie\n\n\nCode\ndatatable(as.data.frame( sort(table(bol038$scientificName))))"
  },
  {
    "objectID": "occupancy.html#usemos-las-coordenadas-para-extraer-covariables-espaciales",
    "href": "occupancy.html#usemos-las-coordenadas-para-extraer-covariables-espaciales",
    "title": "occupancy",
    "section": "Usemos las coordenadas para extraer covariables espaciales",
    "text": "Usemos las coordenadas para extraer covariables espaciales\nNo te ausutes! no son del espacio exterior! con espaciales quiero decir que son covariables que se pueden obtener de un mapa.\nUsaremos el mapa de puntos (bol038_sites) para extraer el porcentaje de cobertura vegetal del anio 2019 de MODIS, el mapa de cobertura de la tierra del anio 2019 de MODIS y la elevación.\n\n\nCode\n\n# get elevation map\nelevation &lt;- rast(get_elev_raster(bol038_sites, z = 9))\nbb &lt;-  st_as_sfc(st_bbox(elevation)) # make bounding box \n\nland_cover_large &lt;- rast(\"C:/CodigoR/WCS-CameraTrap/raster/latlon/LandCover_Type_Yearly_500m_v61/LC1/MCD12Q1_LC1_2019_001.tif\")\n\n#### convert 200=water;253=fill to ceros\nper_tree_cover_large &lt;-  rast(\"C:/CodigoR/WCS-CameraTrap/raster/latlon/Veg_Cont_Fields_Yearly_250m_v61/Perc_TreeCov/MOD44B_Perc_TreeCov_2019_065.tif\")\n#\n\nland_cover &lt;- terra::crop(land_cover_large, elevation, snap=\"near\") # cut to elevation\nper_tre_cover &lt;- terra::crop(per_tree_cover_large, elevation, snap=\"near\") # cut to elevation\n# project to elevation\nland_cover_p &lt;- terra::project(x = land_cover, y = elevation, method=\"near\")\nper_tre_cover_p &lt;- terra::project(x = per_tre_cover, y = elevation, method=\"bilinear\")\n\next(land_cover_p)&lt;-ext(elevation)\next(per_tre_cover_p)&lt;-ext(elevation)\n\n#resample&lt;-dimension and resolution fits but values change\n# land_cover_p&lt;-resample(land_cover,elevation)\n \n# remove the large maps\nrm(per_tree_cover_large, land_cover_large)\n# make a stack\ncovs_map &lt;- rast(list(elevation, land_cover_p, per_tre_cover_p))\n# rename\nnames(covs_map) &lt;- c(\"elevation\", \"land_cover\", \"per_tre_cover\")\nplot(covs_map)\n\n\n\n\n\n\n\n\n\nCode\n# extract covs using points and add to bol038_sites\ncovs &lt;- cbind(bol038_sites, terra::extract(covs_map, bol038_sites))\n# remove decimals convert to factor\ncovs$land_cover &lt;-  as.factor(floor(covs$land_cover))"
  },
  {
    "objectID": "occupancy.html#construyamos-la-historia-de-detección-de-una-especie.",
    "href": "occupancy.html#construyamos-la-historia-de-detección-de-una-especie.",
    "title": "occupancy",
    "section": "Construyamos la historia de detección de una especie.",
    "text": "Construyamos la historia de detección de una especie.\nEn este caso lo haremmos para el Jaguar. Para esto usaremos la función f.det_history.creator, la cual crea una lista con todas las historias de deteccion por dia, de todas las especies y luego extraemos al jaguar.\nposteriormente usamos el paquete unmarked para adicionar la historia de detección al analisis y calcular la probabilidad de deteccion y la ocupación.\n\n\nCode\n\nhistorias &lt;- f.det_history.creator(data=bol038, year=2019)\nsp_number &lt;- which(names(historias)==\"Panthera onca\")"
  },
  {
    "objectID": "occupancy.html#ensamblemos-el-objeto-umf",
    "href": "occupancy.html#ensamblemos-el-objeto-umf",
    "title": "occupancy",
    "section": "Ensamblemos el objeto UMF",
    "text": "Ensamblemos el objeto UMF\n\n\nCode\n#arrange detections observations\n\nx4_bait &lt;- cbind(as.data.frame(bol038_sites), replicate(49, bol038_sites$bait))\nx4_CamType &lt;- cbind(as.data.frame(bol038_sites), replicate(49, bol038_sites$CamTypes))\nx4_ObsCovs_list &lt;- list(bait= as.data.frame(x4_bait[,5:52]),\n                        CamTypes= as.data.frame(x4_CamType[,5:52]))\n\n# Make UMF object\numf &lt;- unmarkedFrameOccu(y= as.data.frame (historias[[sp_number]]),\n                           siteCovs = as.data.frame(covs),\n                           obsCovs = x4_ObsCovs_list\n                         )\n\n# saveRDS(umf, \"C:/CodigoR/WCS_2024/camera_trap/R/umf.rds\")\n\nplot(umf, main=\"Panthera onca\")"
  },
  {
    "objectID": "occupancy.html#construyamos-modelos-y-seleccionemos-luego-el-mejor-modelo-con-máxima-verosimilitud",
    "href": "occupancy.html#construyamos-modelos-y-seleccionemos-luego-el-mejor-modelo-con-máxima-verosimilitud",
    "title": "occupancy",
    "section": "Construyamos modelos y seleccionemos luego el “mejor” modelo con máxima verosimilitud",
    "text": "Construyamos modelos y seleccionemos luego el “mejor” modelo con máxima verosimilitud\nLa función occu ajusta el modelo de ocupación estándar single season occupancy model basado en modelos binomiales inflados a cero (MacKenzie et al. 2006, Royle y Dorazio 2008).\nVea mas detalles de lo que hace esta funcion y las ecuaciones que hay detras escribiendo en su consola: ?occu o siguiendo este tutorial en español.\n\n\nCode\n\n# fit unmarked models\nfit_1 &lt;- unmarked::occu(~1~1, data=umf) # ok!\nfit_2 &lt;- unmarked::occu(~factor(bait) ~1, data=umf) # It work!\nfit_3 &lt;- unmarked::occu(~factor(CamTypes) ~1, data=umf) # It work!\nfit_4 &lt;- unmarked::occu(~1~scale(elevation), data=umf) # It work!\nfit_5 &lt;- unmarked::occu(~1~factor(land_cover), data=umf) # Hessian problem!\nfit_6 &lt;- unmarked::occu(~1~scale(per_tre_cover), data=umf)# It work!\n\n# model names\n# fit list for detection\nfms1&lt;-fitList(\"p(.) Ocu(.)\"=            fit_1,\n              \"p(bait) Ocu(.)\"=         fit_2, \n              \"p(CamType) Ocu(.)\"=      fit_3, \n              \"p(.) Ocu(elevation)\"=    fit_4,\n              \"p(.) Ocu(land_cover)\"=   fit_5,\n              \"p(.) Ocu(per_tre_cover)\"=fit_6)\n\n# model selection detection unmarked\nms1&lt;- modSel(fms1)\n#&gt; Hessian is singular.\nms1\n#&gt;                         nPars    AIC delta   AICwt cumltvWt\n#&gt; p(CamType) Ocu(.)           3 380.91  0.00 0.37736     0.38\n#&gt; p(bait) Ocu(.)              4 381.84  0.93 0.23658     0.61\n#&gt; p(.) Ocu(.)                 2 382.21  1.30 0.19704     0.81\n#&gt; p(.) Ocu(elevation)         3 383.26  2.35 0.11635     0.93\n#&gt; p(.) Ocu(per_tre_cover)     3 384.21  3.30 0.07249     1.00\n#&gt; p(.) Ocu(land_cover)        9 396.21 15.30 0.00018     1.00\n\n# to see in html\ntoExport &lt;- as(ms1, \"data.frame\")  # Everything\nfms1_table &lt;- toExport |&gt; select(\"model\", \"AIC\", \"delta\", \"cumltvWt\") \ndatatable(fms1_table)\n\n\n\n\n\n\nNote que hay un problema de Hessian en el modelo fit_5!\n\nPero si sera un buen modelo para predecir la detección?\nHagamos una prueba sencilla con interpretación estadistica y visual con parboot al mejor modelo. Esta función simula conjuntos de datos basados en el modelo seleccionado, reajusta el modelo y evalúa una estadística de ajuste especificada por el usuario para cada simulación. Al comparar esta distribución con la estadística observada proporciona un medio para evaluar la bondad de ajuste o evaluar la incertidumbre de la estimación del modelo.\n\n\nCode\n\n# Function returning the fit-statistics.\nfitstats &lt;- function(fm, na.rm=TRUE) {\n    observed &lt;- getY(fm@data)\n    expected &lt;- fitted(fm)\n    # resids &lt;- residuals(fm)\n    # sse &lt;- sum(resids^2, na.rm=na.rm)\n    chisq &lt;- sum((observed - expected)^2 / expected, na.rm=na.rm)\n    # freeTuke &lt;- sum((sqrt(observed) - sqrt(expected))^2, na.rm=na.rm)\n    out &lt;- c(Chisq=chisq) #c(SSE=sse, Chisq=chisq, freemanTukey=freeTuke)\n    return(out)\n}\n\npb &lt;- parboot(fit_3, fitstats, nsim=300, report=1)\nplot(pb, main=\"p(CamType) Ocu(.)\")\n\n\n\n\n\n\n\n\n\nLa linea punteada cae dentro de la distribución del histograma, asi que si es un modelo, con un buen ajuste que serviria para predecir."
  },
  {
    "objectID": "occupancy.html#construyamos-modelos-y-seleccionemos-el-mejor-en-marco-bayesiano",
    "href": "occupancy.html#construyamos-modelos-y-seleccionemos-el-mejor-en-marco-bayesiano",
    "title": "occupancy",
    "section": "Construyamos modelos y seleccionemos el “mejor” en marco Bayesiano",
    "text": "Construyamos modelos y seleccionemos el “mejor” en marco Bayesiano\nAca debemos tener paciencia para que el modelo converga incrementando las iteraciones a por lo menos 100 mil….\n\nJust Wait !!!!!\n\n\n\nCode\n\n# define number of iterations\nitera=10000\n\n# fit stan (Bayesian models) using the package ubms\nfit_stan_1 &lt;- stan_occu(~1~1, data=umf, chains=3, iter=itera, cores=3)\nfit_stan_2 &lt;- stan_occu(~factor(bait)~1, data=umf, chains=3, iter=itera, cores=3)\nfit_stan_3 &lt;- stan_occu(~factor(CamTypes)~1, data=umf, chains=3, iter=itera, cores=3)\nfit_stan_4 &lt;- stan_occu(~1~scale(elevation), data=umf, chains=3, iter=itera, cores=3)\nfit_stan_5 &lt;- stan_occu(~1~factor(land_cover), data=umf, chains=3, iter=itera, cores=3)\nfit_stan_6 &lt;- stan_occu(~1~scale(per_tre_cover), data=umf, chains=3, iter=itera, cores=3)\nfit_stan_7 &lt;- stan_occu(~1~scale(elevation) + factor(land_cover), data=umf, chains=3, iter=itera, cores=3)\n\n# put name to the models\nstan_mods &lt;- fitList(\"p(.) Ocu(.)\" =           fit_stan_1,\n                     \"p(bait) Ocu(.)\"=         fit_stan_2,\n                     \"p(CamType) Ocu(.)\"=      fit_stan_3,\n                     \"p(.) Ocu(elevation)\"=    fit_stan_4,\n                     \"p(.) Ocu(land_cover)\"=   fit_stan_5, \n                     \"p(.) Ocu(per_tre_cover)\"=fit_stan_6,\n                     \"p(.) Ocu(elev+land_cover)\"=fit_stan_7\n                     )\n\n# model selection \nms2 &lt;- round(modSel(stan_mods), 3) #AGB_Spawn\nms2\n#&gt;                               elpd nparam elpd_diff se_diff weight\n#&gt; p(.) Ocu(elevation)       -189.116  2.723     0.000   0.000  0.688\n#&gt; p(.) Ocu(elev+land_cover) -189.173  4.245    -0.056   0.575  0.017\n#&gt; p(.) Ocu(land_cover)      -189.463  3.956    -0.347   1.339  0.296\n#&gt; p(.) Ocu(.)               -189.576  1.988    -0.460   1.203  0.000\n#&gt; p(.) Ocu(per_tre_cover)   -190.512  3.441    -1.396   1.755  0.000\n#&gt; p(bait) Ocu(.)            -190.560  3.547    -1.443   1.723  0.000\n#&gt; p(CamType) Ocu(.)         -190.627  3.320    -1.511   1.273  0.000\n\n# to see the table in html\nms2_table &lt;- as(ms2, \"data.frame\")  # Everything\ndatatable(ms2_table)\n\n\n\n\n\n\n\nEl modelo con el elpd más grande “p(CamType) Ocu(.)” tuvo el mejor rendimiento. Aca la tabla tiene diferente orden que las tablas de comparar el AIC.\n\nLa columna elpd_diff muestra la diferencia en elpd entre un modelo y el modelo superior; Si esta diferencia es varias veces mayor que el error estándar de la diferencia (se_diff), estamos seguros de que el modelo con el elpd más grande tuvo un mejor desempeño.\n\nPero si sera un buen modelo para predecir la deteción?\nHagamos una prueba remuestreando con la función gof. Para cada muestreo de los posteriores, la estadística MB se calcula para los datos reales y para un conjunto de datos simulado. La proporción de muestreos para los cuales la estadística simulada es mayor que la estadística real debería ser cercana a 0,5 si el modelo se ajusta bien.\n\n\nCode\n(fit_top_gof &lt;- gof(fit_stan_3, draws=100, quiet=TRUE))\n#&gt; MacKenzie-Bailey Chi-square \n#&gt; Point estimate = 3760485.156\n#&gt; Posterior predictive p = 0.27\nplot(fit_top_gof)\n\n\n\n\n\n\n\n\n\nAcá la interpretación es que los puntos deben estar distribuidos alrededor de la linea y el valor P debe ser cercano a 0.5. En este caso 0.2 no esta mal, es un modelo que se puede usar para predecir, probablemente con un error grande pero dentro de los limites de lo razonable.\n\n\nY cual es la probabilidad de deteccion y ocupacion del jaguar?\nVeamos los detalles del modelo\n\n\nCode\n(fit_stan_3)\n#&gt; \n#&gt; Call:\n#&gt; stan_occu(formula = ~factor(CamTypes) ~ 1, data = umf, chains = 3, \n#&gt;     iter = itera, cores = 3)\n#&gt; \n#&gt; Occupancy (logit-scale):\n#&gt;  Estimate    SD  2.5% 97.5% n_eff Rhat\n#&gt;     0.587 0.806 -0.47  2.62  3608    1\n#&gt; \n#&gt; Detection (logit-scale):\n#&gt;                   Estimate    SD  2.5%  97.5% n_eff Rhat\n#&gt; (Intercept)         -3.838 0.379 -4.60 -3.115  4726    1\n#&gt; factor(CamTypes)2   -0.331 0.385 -1.07  0.446  5863    1\n#&gt; \n#&gt; LOOIC: 381.255\n#&gt; Runtime: 33.703 sec\n\n\nRecuerque que estan en escala logit, asi que usamos plogis para convertirlo a escala normal, asi plogis(-0.33) = 0.4182406 es la probabilidad de deteccion, cuando el intercepto del tipo de camara es cero. Es una probabilidad baja tipica de un Jaguar, pero alta si se compara con otros muestreos.\nLa ocupación es plogis(0.587) = 0.6426765. Podriamos decir que el jaguar esta ocupando mas de 60% de los sitios muestreados."
  },
  {
    "objectID": "occupancy.html#grafiquemos-los-modelos",
    "href": "occupancy.html#grafiquemos-los-modelos",
    "title": "occupancy",
    "section": "Grafiquemos los modelos",
    "text": "Grafiquemos los modelos\n\nBait\n\n\nCode\nplot_effects(fit_stan_2, \"det\") # Detection\n\n\n\n\n\n\n\n\n\n\n\nCamType\n\n\nCode\nplot_effects(fit_stan_3, \"det\") # Detection\n\n\n\n\n\n\n\n\n\n\n\nElevation\n\n\nCode\nplot_effects(fit_stan_4, \"state\") # Ocupancy\n\n\n\n\n\n\n\n\n\n\n\nPercent tree cover\n\n\nCode\nplot_effects(fit_stan_6, \"state\") # Ocupancy\n\n\n\n\n\n\n\n\n\n\n\nLand cover\n\n\nCode\n# plot top model\n\nplot_effects(fit_stan_5, \"state\") # Ocupancy"
  },
  {
    "objectID": "occupancy.html#package-citation",
    "href": "occupancy.html#package-citation",
    "title": "occupancy",
    "section": "Package Citation",
    "text": "Package Citation\n\n\nCode\npkgs &lt;- cite_packages(output = \"paragraph\", pkgs=\"Session\", out.dir = \".\")\n# knitr::kable(pkgs)\npkgs\n\n\nWe used R version 4.3.2 (R Core Team 2023) and the following R packages: DT v. 0.32 (Xie, Cheng, and Tan 2024), elevatr v. 0.99.0 (Hollister et al. 2023), maps v. 3.4.2 (Richard A. Becker, Ray Brownrigg. Enhancements by Thomas P Minka, and Deckmyn. 2023), mapview v. 2.11.2 (Appelhans et al. 2023), sf v. 1.0.15 (Pebesma 2018; Pebesma and Bivand 2023), terra v. 1.7.71 (Hijmans 2024), tidyverse v. 2.0.0 (Wickham et al. 2019), tmap v. 3.99.9000 (Tennekes 2018), ubms v. 1.2.6 (Kellner et al. 2021), unmarked v. 1.4.1 (Fiske and Chandler 2011; Kellner et al. 2023)."
  },
  {
    "objectID": "occupancy.html#sesion-info",
    "href": "occupancy.html#sesion-info",
    "title": "occupancy",
    "section": "Sesion info",
    "text": "Sesion info\n\n\nCode\nprint(sessionInfo(), locale = FALSE)\n#&gt; R version 4.3.2 (2023-10-31 ucrt)\n#&gt; Platform: x86_64-w64-mingw32/x64 (64-bit)\n#&gt; Running under: Windows 10 x64 (build 19042)\n#&gt; \n#&gt; Matrix products: default\n#&gt; \n#&gt; \n#&gt; attached base packages:\n#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     \n#&gt; \n#&gt; other attached packages:\n#&gt;  [1] hms_1.1.3       lubridate_1.9.3 forcats_1.0.0   stringr_1.5.1  \n#&gt;  [5] dplyr_1.1.4     purrr_1.0.2     readr_2.1.5     tidyr_1.3.1    \n#&gt;  [9] tibble_3.2.1    ggplot2_3.5.1   tidyverse_2.0.0 ubms_1.2.6     \n#&gt; [13] unmarked_1.4.1  elevatr_0.99.0  terra_1.7-71    tmap_3.99.9000 \n#&gt; [17] maps_3.4.2      mapview_2.11.2  sf_1.0-15       DT_0.32        \n#&gt; [21] grateful_0.2.4  readxl_1.4.3   \n#&gt; \n#&gt; loaded via a namespace (and not attached):\n#&gt;  [1] DBI_1.2.2               pbapply_1.7-2           leafpop_0.1.0          \n#&gt;  [4] gridExtra_2.3           tmaptools_3.1-1         s2_1.1.6               \n#&gt;  [7] inline_0.3.19           rlang_1.1.3             magrittr_2.0.3         \n#&gt; [10] matrixStats_1.2.0       e1071_1.7-14            compiler_4.3.2         \n#&gt; [13] loo_2.7.0               systemfonts_1.0.5       png_0.1-8              \n#&gt; [16] vctrs_0.6.5             wk_0.9.1                pkgconfig_2.0.3        \n#&gt; [19] fastmap_1.1.1           ellipsis_0.3.2          lwgeom_0.2-13          \n#&gt; [22] leafem_0.2.3            utf8_1.2.4              rmarkdown_2.27         \n#&gt; [25] tzdb_0.4.0              xfun_0.44               satellite_1.0.5        \n#&gt; [28] jsonlite_1.8.8          uuid_1.2-0              parallel_4.3.2         \n#&gt; [31] R6_2.5.1                stringi_1.8.3           RColorBrewer_1.1-3     \n#&gt; [34] StanHeaders_2.32.5      jquerylib_0.1.4         cellranger_1.1.0       \n#&gt; [37] stars_0.6-4             Rcpp_1.0.12             rstan_2.32.6           \n#&gt; [40] knitr_1.46              base64enc_0.1-3         leaflet.providers_2.0.0\n#&gt; [43] timechange_0.3.0        Matrix_1.6-1.1          tidyselect_1.2.1       \n#&gt; [46] rstudioapi_0.16.0       dichromat_2.0-0.1       abind_1.4-5            \n#&gt; [49] yaml_2.3.8              codetools_0.2-19        curl_5.2.0             \n#&gt; [52] pkgbuild_1.4.4          lattice_0.22-5          leafsync_0.1.0         \n#&gt; [55] withr_3.0.0             evaluate_0.23           units_0.8-5            \n#&gt; [58] proxy_0.4-27            RcppParallel_5.1.7      pillar_1.9.0           \n#&gt; [61] KernSmooth_2.23-22      stats4_4.3.2            generics_0.1.3         \n#&gt; [64] sp_2.1-3                rstantools_2.4.0        munsell_0.5.0          \n#&gt; [67] scales_1.3.0            class_7.3-22            glue_1.7.0             \n#&gt; [70] tools_4.3.2             leaflegend_1.2.0        data.table_1.15.0      \n#&gt; [73] RSpectra_0.16-1         XML_3.99-0.16.1         grid_4.3.2             \n#&gt; [76] QuickJSR_1.1.3          crosstalk_1.2.1         colorspace_2.1-0       \n#&gt; [79] cols4all_0.7            raster_3.6-26           brew_1.0-10            \n#&gt; [82] cli_3.6.2               fansi_1.0.6             viridisLite_0.4.2      \n#&gt; [85] svglite_2.1.3           V8_4.4.2                gtable_0.3.4           \n#&gt; [88] digest_0.6.34           widgetframe_0.3.1       progressr_0.14.0       \n#&gt; [91] classInt_0.4-10         farver_2.1.1            htmlwidgets_1.6.4      \n#&gt; [94] htmltools_0.5.7         lifecycle_1.0.4         leaflet_2.2.1          \n#&gt; [97] MASS_7.3-60"
  },
  {
    "objectID": "R/get_MODIS.html",
    "href": "R/get_MODIS.html",
    "title": "Get-MODIS",
    "section": "",
    "text": "library(protolite)\nlibrary(MODIStsp)\nlibrary(terra)\nlibrary(sf)\n\nlibrary(tidyverse)\n\n# Based on: \n# https://github.com/bienflorencia/yaguarundi_IDM/blob/main/code/S01_environmental_data_download_and_cleaning.Rmd"
  },
  {
    "objectID": "R/get_MODIS.html#products",
    "href": "R/get_MODIS.html#products",
    "title": "Get-MODIS",
    "section": "Products",
    "text": "Products\nSee the products\n\nMODIStsp_get_prodnames()\n\n\nBands\n\nLandCover_Type_Yearly_500m (MCD12Q1)\nVeg_Cont_Fields_Yearly_250m (MOD44B)\n\n\nMODIStsp_get_prodlayers(\"MCD12Q1\")$bandnames\nMODIStsp_get_prodlayers(\"MOD44B\")$bandnames"
  },
  {
    "objectID": "R/get_MODIS.html#download",
    "href": "R/get_MODIS.html#download",
    "title": "Get-MODIS",
    "section": "Download",
    "text": "Download\nwe need to create a profile at https://urs.earthdata.nasa.gov/home to get a user and password. We need to define the out_folder to where the data are going to be downloaded. We also need to specify which product (selprod), band (bandsel) and sensor we want to download. We also need to define a temporal period, as start_date and end_date, and a spatial output resolution, for which we will select a bounding box as spatmeth. We will then provide the bbox values (xmin, ymin, xmax, ymax) from our study area (Latin America) in our desired output projection. We will also specify the output projection (output_proj) as ‘+proj=laea +lon_0=-73.125 +lat_0=0 +datum=WGS84 +units=m +no_defs’ Equatorial Lambert azimuthal equal-area (you can also use EPSG code or WKT string here) EPSG:9820.\nusing https://projectionwizard.org/ for distance: Azimuthal equidistant: +proj=aeqd +lon_0=-73.83 +lat_0=-13.2 +datum=WGS84 +units=m +no_defs\n(EPSG) 4326 are long/lat, and they are in decimal degrees.\n\nDecimal degree\n\nLand Cover Type 500m\n\nMODIStsp(gui             = FALSE,\n         out_folder      = 'C:/CodigoR/WCS_2024/camera_trap/raster/latlon/',\n         out_folder_mod  = 'C:/CodigoR/WCS_2024/camera_trap/raster/latlon/',\n         selprod         = 'LandCover_Type_Yearly_500m (MCD12Q1)',\n         bandsel         = 'LC1',\n         sensor          = 'Terra',\n         user            = 'dlizcano' , # your username for NASA http server\n         password        = 'Chuleta_9014',  # your password for NASA http server\n         start_date      = '2000.01.01',\n         end_date        = '2022.12.31',\n         verbose         = TRUE,\n         bbox            =  c(-118.5, -57.5, -34.1, 32.3), # bbox of Latam http://bboxfinder.com/  xmin, ymin, xmax, ymax   lon, lat \n         spatmeth        = 'bbox',\n         out_format      = 'GTiff',\n         compress        = 'LZW',\n         out_projsel     = 'User Defined',\n         output_proj     = '+proj=longlat +datum=WGS84 +no_defs +type=crs',\n         delete_hdf      = TRUE,\n         parallel        = TRUE\n         )\n\n\n\nPercent Tree Cover 250m\n\nMODIStsp(gui             = FALSE,\n         out_folder      = 'C:/CodigoR/WCS_2024/camera_trap/raster/latlon/',\n         out_folder_mod  = 'C:/CodigoR/WCS_2024/camera_trap/raster/latlon/',\n         selprod         = 'Veg_Cont_Fields_Yearly_250m (MOD44B)',\n         bandsel         = 'Perc_TreeCov',\n         sensor          = 'Terra',\n         user            = 'dlizcano' , # your username for NASA http server\n         password        = 'Chuleta_9014',  # your password for NASA http server\n         start_date      = '2000.01.01',\n         end_date        = '2022.12.31',\n         verbose         = TRUE,\n         bbox            =  c(-118.5, -57.5, -34.1, 32.3), # bbox of Latam http://bboxfinder.com/  xmin, ymin, xmax, ymax   lon, lat \n         spatmeth        = 'bbox',\n         out_format      = 'GTiff',\n         compress        = 'LZW',\n         out_projsel     = 'User Defined',\n         output_proj     = '+proj=longlat +datum=WGS84 +no_defs +type=crs',\n         delete_hdf      = TRUE,\n         parallel        = TRUE\n         )\n\n\n\n\nLambert\n\nLand Cover Type 500m\n\nMODIStsp(gui             = FALSE,\n         out_folder      = \"C:/CodigoR/WCS_2024/camera_trap/raster/lambert\",\n         out_folder_mod  = \"C:/CodigoR/WCS_2024/camera_trap/raster/lambert\",\n         selprod         = 'LandCover_Type_Yearly_500m (MCD12Q1)',\n         bandsel         = 'LC1',\n         sensor          = 'Terra',\n         user            = 'dlizcano' , # your username for NASA http server\n         password        = 'Chuleta_9014',  # your password for NASA http server\n         start_date      = '2000.01.01',\n         end_date        = '2022.12.31',\n         verbose         = TRUE,\n         bbox            =  c(-5596641.0845, -6673508.6914, 4698677.0087, 4157242.8202), #bbox of Latam\n         spatmeth        = 'bbox',\n         out_format      = 'GTiff',\n         compress        = 'LZW',\n         out_projsel     = 'User Defined',\n         output_proj     = '+proj=laea +lon_0=-73.125 +lat_0=0 +datum=WGS84 +units=m +no_defs',\n         delete_hdf      = TRUE,\n         parallel        = TRUE\n         )\n\n\n\nPercent Tree Cover 250m\n\nMODIStsp(gui             = FALSE,\n         out_folder      = \"C:/CodigoR/WCS_2024/camera_trap/raster/lambert\",\n         out_folder_mod  = \"C:/CodigoR/WCS_2024/camera_trap/raster/lambert\",\n         selprod         = 'Veg_Cont_Fields_Yearly_250m (MOD44B)',\n         bandsel         = 'Perc_TreeCov',\n         sensor          = 'Terra',\n         user            = 'dlizcano' , # your username for NASA http server\n         password        = 'Chuleta_9014',  # your password for NASA http server\n         start_date      = '2000.01.01',\n         end_date        = '2022.12.31',\n         verbose         = TRUE,\n         bbox            =  c(-5596641.0845, -6673508.6914, 4698677.0087, 4157242.8202), #bbox of Latam\n         spatmeth        = 'bbox',\n         out_format      = 'GTiff',\n         compress        = 'LZW',\n         out_projsel     = 'User Defined',\n         output_proj     = '+proj=laea +lon_0=-73.125 +lat_0=0 +datum=WGS84 +units=m +no_defs',\n         delete_hdf      = TRUE,\n         parallel        = TRUE\n         )\n\nOnce the data are downloaded we will process the rasters using the terra package.\n\n# PRE: 2000-2013\nlandcover_pre_files &lt;- list.files('C:/CodigoR/WCS_2024/camera_trap/raster/latlon/LandCover_Type_Yearly_500m_v61/LC1', '200[0-1]|201[0-3]', full.names = T)\nlandcover_pre_c &lt;- rast(landcover_pre_files)\nland_pre &lt;- modal(landcover_pre_c)\nnames(land_pre) &lt;- 'land_pre'\nrm(landcover_pre_c)\n\n\n# POS: 2014-2022\nlandcover_pos_files &lt;- list.files('C:/CodigoR/WCS_2024/camera_trap/raster/latlon/LandCover_Type_Yearly_500m_v61/LC1', '201[4-9]|202[0-9]', full.names = T)\nlandcover_pos_c &lt;- rast(landcover_pos_files)\nland_pos &lt;- modal(landcover_pos_c)\nnames(land_pos) &lt;- 'land_pos'\nrm(landcover_pos_c)\n\nAs the values are numeric and we want the categories, we will rename them. Please bear in mind that your landcover layer might not have the same classes/levels as mine. Check here the classification values: MCD12_User_Guide_V6 https://lpdaac.usgs.gov/documents/101/MCD12_User_Guide_V6.pdf (see page 7 Classification Legends).\n\n# Renaming IGBP classification levels\nlancover_clases &lt;- data.frame(ID=1:17, \n                      category=c( \"Evergreen needleleaf forests\",\n                                \"Evergreen broadleaf forests\",\n                                \"Deciduous needleleaf forests\",\n                                \"Deciduous broadleaf forests\",\n                                \"Mixed forests\",\n                                \"Closed shrublands\",\n                                \"Open shrublands\",\n                                \"Woody savannas\",\n                                \"Savannas\",\n                                \"Grasslands\",\n                                \"Permanent wetlands\",\n                                \"Croplands\",\n                                \"Urban and built-up lands\",\n                                \"Cropland/natural vegetation mosaics\",\n                                \"Snow and ice\",\n                                \"Barren\",\n                                \"Water bodies\") )\n\nlevels(land_pre) &lt;- lancover_clases\nlevels(land_pos) &lt;- lancover_clases\n\nplot(land_pre, main='Land cover 2001-2013', axes=F, mar=c(0,0,5,15))\nplot(land_pos, main='Land cover 2001-2013', axes=F, mar=c(0,0,5,15))\n\nwriteRaster(land_pre, \"C:/CodigoR/WCS_2024/camera_trap/raster/latlon/land_pre.tif\")\nwriteRaster(land_pos, \"C:/CodigoR/WCS_2024/camera_trap/raster/latlon/land_pos.tif\")"
  },
  {
    "objectID": "occupancy.html#usemos-el-mejor-modelo-para-hacer-una-prediccion-espacialmente-explicita-de-la-ocupación",
    "href": "occupancy.html#usemos-el-mejor-modelo-para-hacer-una-prediccion-espacialmente-explicita-de-la-ocupación",
    "title": "occupancy",
    "section": "Usemos el mejor modelo para hacer una prediccion espacialmente explicita de la ocupación",
    "text": "Usemos el mejor modelo para hacer una prediccion espacialmente explicita de la ocupación\nUsaremos el mapa de el porcentage de cobertura de dosel para predecir la ocupación del Jaguar.\n\n\nCode\n# predict using the raster\noccu_pred &lt;- predict(fit_stan_6, submodel=\"state\", newdata=covs_map$per_tre_cover)\n\n# make a template raster = to covs_map$elevation \npred_map &lt;- covs_map$elevation \n# drape prediction on top\npred_map[] &lt;- occu_pred$Predicted\n# put name\nnames(pred_map) &lt;- \"Occupancy\"\n# view in map\nmapview (pred_map) + mapview(bol038_sites, zcol=\"bait\")"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Load Full Contry Data",
    "section": "",
    "text": "Code\nlibrary(readxl)\nlibrary(grateful)\n\nlibrary(sf)\nlibrary(mapview)\nlibrary(maps)\n\nlibrary(ggTimeSeries)\n\nlibrary(tidyverse)\n\nsource(\"C:/CodigoR/WCS-CameraTrap/R/organiza_datos.R\")"
  },
  {
    "objectID": "index.html#carguemos-algunos-paquetes-y-funciones-de-ayuda",
    "href": "index.html#carguemos-algunos-paquetes-y-funciones-de-ayuda",
    "title": "Load Full Contry Data",
    "section": "",
    "text": "Code\nlibrary(readxl)\nlibrary(grateful)\n\nlibrary(sf)\nlibrary(mapview)\nlibrary(maps)\n\nlibrary(ggTimeSeries)\n\nlibrary(tidyverse)\n\nsource(\"C:/CodigoR/WCS-CameraTrap/R/organiza_datos.R\")"
  },
  {
    "objectID": "index.html#carguemos-los-datos-de-un-pais",
    "href": "index.html#carguemos-los-datos-de-un-pais",
    "title": "Load Full Contry Data",
    "section": "Carguemos los datos de un pais",
    "text": "Carguemos los datos de un pais\nEn este caso vamos a usar Ecuador como ejemplo.\n\n\nCode\n########################\n### Paises\n########################\ncarpeta &lt;- \"C:/CodigoR/WCS-CameraTrap/data/\"\npaises &lt;- list.files(carpeta,  recursive = FALSE)\n\n\n\nArgentina &lt;- data_by_country(country = \"Argentina\")\nBolivia &lt;- data_by_country(country = \"Bolivia\")\nBrazil &lt;- data_by_country(country = \"Brazil\")\nColombia &lt;- data_by_country(country = \"Colombia\")\nEcuador &lt;- data_by_country(country = \"Ecuador\")\nGuatemala &lt;- data_by_country(country = \"Guatemala\")\nEcuador &lt;- data_by_country(country = \"Ecuador\")\nParaguay &lt;- data_by_country(country = \"Paraguay\")\nPeru &lt;- data_by_country(country = \"Peru\")\nVenezuela &lt;- data_by_country(country = \"Venezuela\")\n\n\n\nUse la funcion data_by_country para cargar todos los datos de un pais y ver un mapa sencillo e interactivo. Note que podemos usar los datos de cualquier otro pais.\n\n\nCode\n\nEcuador &lt;- data_by_country(country = \"Ecuador\")\n#&gt; [1] 1\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 2\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 3\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 4\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 5\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 6\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 7\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 8\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 9\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 10\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 11\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 12\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 13\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 14\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 15\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 16\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 17\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 18\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 19\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 20\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 21\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 22\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] 23\n#&gt;  [1] \"ID\"                                  \"Deployment ID\"                      \n#&gt;  [3] \"Point\"                               \"Longitude Resolution\"               \n#&gt;  [5] \"Latitude Resolution\"                 \"Camera Deployment Begin Date\"       \n#&gt;  [7] \"Camera Deployment End Date\"          \"Bait Type\"                          \n#&gt;  [9] \"Bait Description\"                    \"Feature Type\"                       \n#&gt; [11] \"Feature Type methodology\"            \"Camera Id\"                          \n#&gt; [13] \"Camera Type\"                         \"Quiet Period Setting\"               \n#&gt; [15] \"Restriction on Access (Yes/No only)\" \"Camera Failure Details\"             \n#&gt; [1] \"archivo: ECU-013.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU-014.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU-015.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU-016.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU-017.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU-018.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU-019.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU-020.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU-021.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU-022.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU-023.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU_001_17MAR15_Final.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU_002_17MAR15_Final.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU_003_17MAR15_Final.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU_004_17MAR15_Final.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU_005_17MAR15_Final.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU_006_17MAR15_Final.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU_007_17MAR15_Final.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU_008_17MAR15_Final.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU_009_17MAR15_Final.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU_010_17MAR15_Final.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU_011_17MAR15_Final.xlsxcols: 17\"\n#&gt; [1] \"archivo: ECU_012_17MAR15_Final.xlsxcols: 17\"\n\nCountry_to_map &lt;- Ecuador |&gt;  distinct(ExcelFile, year, `Deployment ID`, `Longitude Resolution`, `Latitude Resolution`)\n\nprojlatlon &lt;- \"+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0\"\n\nCountry_map &lt;- st_as_sf(x = Country_to_map,                         \n                         coords = c(\"Longitude Resolution\", \n                                    \"Latitude Resolution\"),\n                         crs = projlatlon)\n\n\nmapview(Country_map, zcol = c(\"year\"),  burst = TRUE) # burst = TRUE prouce uniques"
  },
  {
    "objectID": "index.html#fotos-por-tipo-de-camara",
    "href": "index.html#fotos-por-tipo-de-camara",
    "title": "Load Full Contry Data",
    "section": "Fotos por tipo de camara",
    "text": "Fotos por tipo de camara\nAhora queremos ver las fotos que se han tomado con los diferentes modelos de camaras.\n\n\nCode\n# Creating ggplot graphs \nEcuador |&gt; mutate(CameraType=`Camera Type`)  |&gt; \n  dplyr::count(CameraType,\n               sort = TRUE,\n               name = \"n_cameraBrand\") |&gt; \n  ggplot2::ggplot() + #plotting the camera models most used\n  ggplot2::geom_col(ggplot2::aes(x = CameraType,\n                                 y = n_cameraBrand))"
  },
  {
    "objectID": "index.html#veamos-todas-las-fotos-en-un-calendario",
    "href": "index.html#veamos-todas-las-fotos-en-un-calendario",
    "title": "Load Full Contry Data",
    "section": "Veamos todas las fotos en un calendario",
    "text": "Veamos todas las fotos en un calendario\n\n\nCode\n\ndtData &lt;- Ecuador  |&gt; as.data.frame() |&gt; \n  mutate(Date_Time=as_date(`Date_Time Captured`)) |&gt; \n    count(Date_Time) |&gt; na.omit()\n\n# base plot\np1 = ggplot_calendar_heatmap(\n   dtData,\n   'Date_Time',\n   'n',\n   dayBorderSize = 0.1,\n   monthBorderSize = 0.7\n)\n\n# adding some formatting\np1 +\n   xlab(NULL) +\n   ylab(NULL) +\n   scale_fill_continuous(low = 'cyan', high = 'red') +\n   facet_wrap(~Year, ncol = 2) # number of columns"
  },
  {
    "objectID": "index.html#fotos-con-mas-de-100-registros-por-sitios",
    "href": "index.html#fotos-con-mas-de-100-registros-por-sitios",
    "title": "Load Full Contry Data",
    "section": "Fotos con mas de 100 registros por sitios",
    "text": "Fotos con mas de 100 registros por sitios\nSeleccionaremos las especies que tienen mas de 100 registros por cada sitio (Deployment ID).\n\n\nCode\nEcuador |&gt;\n  dplyr::distinct(`Deployment ID`, `Genus Species`) |&gt;\n  dplyr::count(`Genus Species`, sort = TRUE) |&gt;\n  dplyr::filter(n &gt;= 100) |&gt; #change threshold \n  ggplot2::ggplot() +\n  ggplot2::geom_col(ggplot2::aes(x = `Genus Species`, y = n)) +\n  ggplot2::scale_y_continuous(\n    expand = ggplot2::expansion(mult = 0),\n    limits = c(0, 1100),\n    breaks = seq(0, 1100, by = 100)\n  ) +\n  ggplot2::labs(x = NULL,\n                y = \"Locations\") +\n  ggplot2::coord_flip() \n\n\n\n\n\n\n\n\n\nCode\n\n  ggplot2::theme(\n    plot.margin = ggplot2::margin(t = 5,\n                                  r = 10,\n                                  b = 5,\n                                  l = 5,\n                                  unit = \"pt\"),\n    axis.text.y = ggtext::element_markdown()\n  )\n#&gt; List of 2\n#&gt;  $ axis.text.y:List of 22\n#&gt;   ..$ family        : NULL\n#&gt;   ..$ face          : NULL\n#&gt;   ..$ size          : NULL\n#&gt;   ..$ colour        : NULL\n#&gt;   ..$ fill          : NULL\n#&gt;   ..$ box.colour    : NULL\n#&gt;   ..$ linetype      : NULL\n#&gt;   ..$ linewidth     : NULL\n#&gt;   ..$ hjust         : NULL\n#&gt;   ..$ vjust         : NULL\n#&gt;   ..$ halign        : NULL\n#&gt;   ..$ valign        : NULL\n#&gt;   ..$ angle         : NULL\n#&gt;   ..$ lineheight    : NULL\n#&gt;   ..$ margin        : NULL\n#&gt;   ..$ padding       : NULL\n#&gt;   ..$ r             : NULL\n#&gt;   ..$ align_widths  : NULL\n#&gt;   ..$ align_heights : NULL\n#&gt;   ..$ rotate_margins: NULL\n#&gt;   ..$ debug         : logi FALSE\n#&gt;   ..$ inherit.blank : logi FALSE\n#&gt;   ..- attr(*, \"class\")= chr [1:3] \"element_markdown\" \"element_text\" \"element\"\n#&gt;  $ plot.margin: 'margin' num [1:4] 5points 10points 5points 5points\n#&gt;   ..- attr(*, \"unit\")= int 8\n#&gt;  - attr(*, \"class\")= chr [1:2] \"theme\" \"gg\"\n#&gt;  - attr(*, \"complete\")= logi FALSE\n#&gt;  - attr(*, \"validate\")= logi TRUE"
  },
  {
    "objectID": "index.html#session-info-in-r.",
    "href": "index.html#session-info-in-r.",
    "title": "Load Full Contry Data",
    "section": "Session info in R.",
    "text": "Session info in R.\n\n\nCode\nsessionInfo()\n#&gt; R version 4.3.2 (2023-10-31 ucrt)\n#&gt; Platform: x86_64-w64-mingw32/x64 (64-bit)\n#&gt; Running under: Windows 10 x64 (build 19042)\n#&gt; \n#&gt; Matrix products: default\n#&gt; \n#&gt; \n#&gt; locale:\n#&gt; [1] LC_COLLATE=Spanish_Colombia.utf8  LC_CTYPE=Spanish_Colombia.utf8   \n#&gt; [3] LC_MONETARY=Spanish_Colombia.utf8 LC_NUMERIC=C                     \n#&gt; [5] LC_TIME=Spanish_Colombia.utf8    \n#&gt; \n#&gt; time zone: America/Bogota\n#&gt; tzcode source: internal\n#&gt; \n#&gt; attached base packages:\n#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     \n#&gt; \n#&gt; other attached packages:\n#&gt;  [1] lubridate_1.9.3    forcats_1.0.0      stringr_1.5.1      dplyr_1.1.4       \n#&gt;  [5] purrr_1.0.2        readr_2.1.5        tidyr_1.3.1        tibble_3.2.1      \n#&gt;  [9] tidyverse_2.0.0    ggTimeSeries_1.0.2 ggplot2_3.5.1      maps_3.4.2        \n#&gt; [13] mapview_2.11.2     sf_1.0-15          grateful_0.2.4     readxl_1.4.3      \n#&gt; \n#&gt; loaded via a namespace (and not attached):\n#&gt;  [1] tidyselect_1.2.1        farver_2.1.1            fastmap_1.1.1          \n#&gt;  [4] leaflet_2.2.1           digest_0.6.34           timechange_0.3.0       \n#&gt;  [7] lifecycle_1.0.4         ellipsis_0.3.2          terra_1.7-71           \n#&gt; [10] magrittr_2.0.3          compiler_4.3.2          rlang_1.1.3            \n#&gt; [13] tools_4.3.2             leafpop_0.1.0           utf8_1.2.4             \n#&gt; [16] yaml_2.3.8              data.table_1.15.0       knitr_1.46             \n#&gt; [19] labeling_0.4.3          brew_1.0-10             htmlwidgets_1.6.4      \n#&gt; [22] sp_2.1-3                classInt_0.4-10         xml2_1.3.6             \n#&gt; [25] RColorBrewer_1.1-3      KernSmooth_2.23-22      withr_3.0.0            \n#&gt; [28] grid_4.3.2              stats4_4.3.2            fansi_1.0.6            \n#&gt; [31] e1071_1.7-14            leafem_0.2.3            colorspace_2.1-0       \n#&gt; [34] scales_1.3.0            cli_3.6.2               rmarkdown_2.27         \n#&gt; [37] generics_0.1.3          rstudioapi_0.16.0       tzdb_0.4.0             \n#&gt; [40] DBI_1.2.2               proxy_0.4-27            s2_1.1.6               \n#&gt; [43] cellranger_1.1.0        base64enc_0.1-3         vctrs_0.6.5            \n#&gt; [46] jsonlite_1.8.8          hms_1.1.3               systemfonts_1.0.5      \n#&gt; [49] crosstalk_1.2.1         jquerylib_0.1.4         units_0.8-5            \n#&gt; [52] glue_1.7.0              codetools_0.2-19        leaflet.providers_2.0.0\n#&gt; [55] ggtext_0.1.2            stringi_1.8.3           gtable_0.3.4           \n#&gt; [58] raster_3.6-26           munsell_0.5.0           pillar_1.9.0           \n#&gt; [61] htmltools_0.5.7         satellite_1.0.5         R6_2.5.1               \n#&gt; [64] wk_0.9.1                evaluate_0.23           lattice_0.22-5         \n#&gt; [67] png_0.1-8               gridtext_0.1.5          class_7.3-22           \n#&gt; [70] Rcpp_1.0.12             uuid_1.2-0              svglite_2.1.3          \n#&gt; [73] xfun_0.44               pkgconfig_2.0.3"
  }
]